(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(36),i=a.n(s),o=(a(92),a(93),a(94),a(21)),c=a(13),l=a(81),u=a(6),d={isAuthenticated:!1,curator:null,curatorLoading:!1,curatorLinks:[],curatorError:null},m=Object(c.c)({curator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURATOR_LOAD":return Object(u.a)({},e,{curatorLoading:!0});case"CURATOR_LOGIN":return Object(u.a)({},e,{curatorLoading:!1,curator:t.payload,isAuthenticated:!0,curatorError:null});case"CURATOR_ERROR":return Object(u.a)({},e,{curatorLoading:!1,curatorError:t.payload});case"CURATOR_LINKS":case"CURATOR_ADD_URL":return Object(u.a)({},e,{curatorLoading:!1,curatorLinks:t.payload,curatorError:null});case"CURATOR_LOGOUT":return Object(u.a)({},e,{isAuthenticated:!1,curator:null,curatorLoading:!1,curatorLinks:[],curatorError:null});default:return e}}}),h=[l.a],p=Object(c.e)(m,{},Object(c.d)(c.a.apply(void 0,h))),v=a(50),g=a(8),E=a(38),f=a(18),k=a(19),b=a(22),L=a(20),y=a(23),O=a(14),N=a.n(O),w=function(e){e?N.a.defaults.headers.common.Authorization=e:delete N.a.defaults.headers.common.Authorization},R=a(82),C=a.n(R),A=function(e){return function(t){t({type:"CURATOR_LOAD"}),N.a.get("/api/curatorauth/current",{headers:{authorization:e}}).then(function(a){localStorage.setItem("jwtToken",e),w(e),t({type:"CURATOR_LOGIN",payload:a.data})}).catch(function(e){return console.log(e)})}},S=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(L.a)(t).call(this,e))).formDataChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.login=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.loginCurator(t)},a.state={isAuthenticated:!1,email:"",password:"",error:null},a}return Object(y.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.setState({isAuthenticated:this.props.curator.isAuthenticated}),localStorage.jwtToken&&this.props.getCurrentCurator(localStorage.jwtToken)}},{key:"componentWillReceiveProps",value:function(e){e.curator&&(this.setState({isAuthenticated:e.curator.isAuthenticated}),e.curator.curatorError&&this.setState({error:e.curator.curatorError}))}},{key:"render",value:function(){return this.state.isAuthenticated?n.a.createElement(g.a,{to:"/dashboard"}):n.a.createElement("div",{className:"login-wrapper"},n.a.createElement("div",{className:"login-body"},n.a.createElement("div",{className:"login-body-circle login-body-circle-1"}),n.a.createElement("div",{className:"login-body-circle login-body-circle-2"})),n.a.createElement("div",{className:"login-content"},n.a.createElement("div",{className:"login-content-left"},n.a.createElement("div",{className:"login-content-left-logo"},n.a.createElement("img",{src:a(64),alt:""})),n.a.createElement("form",{className:"login-content-left-form",onSubmit:this.login},n.a.createElement("label",{htmlFor:"login-form-email"},"E-mail"),n.a.createElement("input",{type:"email",name:"email",id:"login-form-email",value:this.state.email,onChange:this.formDataChange}),n.a.createElement("label",{htmlFor:"login-form-password"},"Password"),n.a.createElement("input",{type:"password",name:"password",id:"login-form-password",value:this.state.password,onChange:this.formDataChange}),n.a.createElement("button",{type:"submit"},"LOGIN"))),n.a.createElement("div",{className:"login-content-right"},n.a.createElement("span",null,"MANAGE AND SHORTEN YOUR LINKS")),this.state.error?n.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.error):null))}}]),t}(r.Component),D=Object(o.b)(function(e){return{curator:e.curator}},{loginCurator:function(e){return function(t){t({type:"CURATOR_LOAD"}),N.a.post("/api/curatorauth/login",e).then(function(e){if(e.data.success){var a=e.data.token;localStorage.setItem("jwtToken",a),w(a);var r=C()(a);t({type:"CURATOR_LOGIN",payload:r.users})}else t({type:"CURATOR_ERROR",payload:"AUTH ERROR"})}).catch(function(e){t({type:"CURATOR_ERROR",payload:e.response.data.err})})}},getCurrentCurator:A})(S),T=a(16),j=a(17),U=a(84),_=a(86),I=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(L.a)(t).call(this,e))).toggleDatePicker=function(){a.setState({datePicker:!a.state.datePicker})},a.onDateChange=function(e,t){"month"===e&&a.setState({selectedMonth:t}),"year"===e&&a.setState({selectedYear:t}),a.updateGraph()},a.viewCountryStats=function(){var e=[];for(var t in a.state.countries)a.state.countries.hasOwnProperty(t)&&e.push(n.a.createElement("li",{className:"list-group-item",key:t},t," ",n.a.createElement("span",{style:{float:"right"}},a.state.countries[t])));return e},a.viewDeviceStats=function(){var e=[];for(var t in a.state.devices)a.state.devices.hasOwnProperty(t)&&e.push(n.a.createElement("li",{className:"list-group-item",key:t},t," ",n.a.createElement("span",{style:{float:"right"}},a.state.devices[t])));return e},a.state={graphData:{labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],datasets:[{label:"Views",data:[],backgroundColor:"#EDA543"}]},linkData:null,selectedMonth:(new Date).getMonth()+1,selectedYear:(new Date).getFullYear(),datePicker:!1,countries:[],devices:[]},a}return Object(y.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.setState({linkData:this.props.data}),this.updateGraph()}},{key:"updateGraph",value:function(){for(var e=this,t=[],a=1;a<=31;a++)t[a]=0;this.props.data.accessed.map(function(a){if(e.state.selectedYear==a.year&&e.state.selectedMonth==a.month)switch(a.day){case a.day:t[a.day]++}});var r=[],n=[];this.props.data.accessed.map(function(e){r[e.location]?r[e.location]++:r[e.location]=1,n[e.device]?n[e.device]++:n[e.device]=1}),this.setState({countries:r,devices:n}),this.setState({graphData:Object(u.a)({},this.state.graphData,{datasets:[{label:"Views",data:t,backgroundColor:"#EDA543"}]})})}},{key:"render",value:function(){var e=this;return this.state.linkData?(this.state.countries.map(function(e){return console.log("foo")}),n.a.createElement("div",{className:"viewLink-wrapper"},n.a.createElement("div",{className:"viewLink-body"},n.a.createElement(T.a,{className:"viewLink-body-close",icon:j.e,onClick:this.props.closeLinkStats}),n.a.createElement("div",{className:"viewLink-body-link"},n.a.createElement("div",{className:"viewLink-body-link-long"},this.state.linkData.longUrl),n.a.createElement("div",{className:"viewLink-body-link-short"},this.state.linkData.shortUrl)),n.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleDatePicker},this.state.selectedYear+"/"+this.state.selectedMonth),this.state.datePicker?n.a.createElement("div",{className:"viewLink-body-monthPicker"},n.a.createElement(_.a,{selectedMonth:this.state.selectedMonth,selectedYear:this.state.selectedYear,minYear:2e3,maxYear:2030,onChangeYear:function(t){return e.onDateChange("year",t)},onChangeMonth:function(t){return e.onDateChange("month",t)}})):null,n.a.createElement("div",{className:"viewLink-body-graph"},n.a.createElement(U.a,{label:"views",data:this.state.graphData,options:{maintainAspectRatio:!1}})),n.a.createElement("div",{className:"viewLink-body-totalViews"},"Total -  ",this.state.linkData.accessed.length),n.a.createElement("div",{className:"viewLink-body-metrics"},n.a.createElement("div",null,n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item active"}," Countries"),this.viewCountryStats())),n.a.createElement("div",null),n.a.createElement("div",null,n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item active"},"Top DEVICES"),this.viewDeviceStats())))))):n.a.createElement("h1",null,"LOADING ...")}}]),t}(r.Component),G=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(L.a)(t).call(this,e))).viewLinkStats=function(e){a.setState({viewLink:!a.state.viewLink,selectedLink:e})},a.topLinks=function(){var e=a.state.myLinks;return(e=e.map(function(e){var t=e.accessed.length;return Object(u.a)({},e,{views:t})})).sort(function(e,t,a){var r=a?function(t){return a(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,a){return e=r(e),a=r(a),t*((e>a)-(a>e))}}("views",!0,parseInt)),e},a.addLink=function(){a.props.addURL({longUrl:a.state.newLink})},a.logout=function(){a.props.logOutCurator()},a.state={isAuthenticated:!1,viewLink:!1,curator:null,myLinks:[],selectedLink:null,newLink:""},a}return Object(y.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.setState({isAuthenticated:this.props.curator.isAuthenticated}),localStorage.jwtToken&&this.props.getCurrentCurator(localStorage.jwtToken),this.props.curator.isAuthenticated&&this.props.getCuratorLinks()}},{key:"componentWillReceiveProps",value:function(e){e.curator&&(this.setState({isAuthenticated:e.curator.isAuthenticated}),e.curator.curator&&this.setState({curator:e.curator.curator}),e.curator.curatorLinks&&this.setState({myLinks:e.curator.curatorLinks}))}},{key:"render",value:function(){var e=this,t=0;return this.state.myLinks.map(function(e){t+=e.accessed.length}),n.a.createElement(n.a.Fragment,null,this.props.curator.isAuthenticated?null:n.a.createElement(g.a,{to:"/"}),this.props.curator.curatorLoading?n.a.createElement("h1",null,"LOADING ...."):null,this.state.viewLink&&this.state.selectedLink?n.a.createElement(I,{closeLinkStats:this.viewLinkStats,data:this.state.selectedLink}):null,this.state.curator?n.a.createElement("div",{className:"dashboard"},n.a.createElement("div",{className:"dashboard-left"},n.a.createElement("div",{className:"dashboard-left-topBar"},n.a.createElement("div",{className:"dashboard-left-topBar-logo"},n.a.createElement("img",{src:a(64),alt:"logo"})),n.a.createElement("div",{className:"dashboard-left-topBar-search"},n.a.createElement("input",{type:"text",name:"search",id:"link-searchBar",placeholder:"Search Links"}),n.a.createElement("button",null," ",n.a.createElement(T.a,{icon:j.d})))),n.a.createElement("div",{className:"dashboard-left-add"},n.a.createElement("input",{type:"text",name:"add",id:"add",placeholder:"Paste your Link here to shorten",value:this.state.newLink,onChange:function(t){return e.setState({newLink:t.target.value})}}),n.a.createElement("button",{onClick:this.addLink},"GO")),n.a.createElement("div",{className:"dashboard-left-list"},n.a.createElement("div",{className:"dashboard-left-list-head"},"ALL LINKS"),n.a.createElement("ul",null,this.state.myLinks.map(function(t){return n.a.createElement("li",{onClick:function(){return e.viewLinkStats(t)}},t.longUrl,n.a.createElement("span",null,t.shortUrl))})))),n.a.createElement("div",{className:"dashboard-divider"},n.a.createElement("div",{className:"dashboard-divider-line"})),n.a.createElement("div",{className:"dashboard-right"},n.a.createElement("div",{className:"dashboard-right-profile"},n.a.createElement("div",{className:"dashboard-right-profile-image"},n.a.createElement("img",{src:"http://flawless-psyche-243712.appspot.com"+this.state.curator.avatar,alt:"Avatar"})),n.a.createElement("div",{className:"dashboard-right-profile-name"},this.state.curator.name),n.a.createElement("div",{className:"dashboard-right-profile-type"},this.state.curator.typeOfUser)),n.a.createElement("ul",{className:"dashboard-right-stats"},n.a.createElement("li",null,n.a.createElement("div",{className:"dashboard-right-stats-icon"},n.a.createElement(T.a,{icon:j.a})),n.a.createElement("div",{className:"dashboard-right-stats-count"},t),n.a.createElement("div",{className:"dashboard-right-stats-name"},"Total Views")),n.a.createElement("li",null,n.a.createElement("div",{className:"dashboard-right-stats-icon"},n.a.createElement(T.a,{icon:j.b})),n.a.createElement("div",{className:"dashboard-right-stats-count"},"77"),n.a.createElement("div",{className:"dashboard-right-stats-name"},"Top Location"))," ",n.a.createElement("li",null,n.a.createElement("div",{className:"dashboard-right-stats-icon"},n.a.createElement(T.a,{icon:j.c})),n.a.createElement("div",{className:"dashboard-right-stats-count"},this.state.myLinks.length),n.a.createElement("div",{className:"dashboard-right-stats-name"},"Total Links"))),n.a.createElement("div",{className:"dashboard-right-topLinks-title"},"Top Links"),n.a.createElement("ul",{className:"dashboard-right-topLinks"},this.topLinks().map(function(t,a){if(a<5)return n.a.createElement("li",{className:"dashboard-right-topLinks-item",onClick:function(){return e.viewLinkStats(t)}},t.shortUrl.substring(0,27)," ",n.a.createElement("span",null,t.views)," ")})),n.a.createElement("div",{className:"dashboard-right-accountLinks"},n.a.createElement("div",{className:"dashboard-right-accountLinks-item"},"Account"),n.a.createElement("div",{className:"dashboard-right-accountLinks-item",onClick:this.logout},"Logout")))):null)}}]),t}(r.Component),P=Object(o.b)(function(e){return{curator:e.curator}},{getCurrentCurator:A,getCuratorLinks:function(){return function(e){e({type:"CURATOR_LOAD"}),N.a.get("/api/url/mylinks").then(function(t){e({type:"CURATOR_LINKS",payload:t.data})}).catch(function(t){return e({type:"CURATOR_ERROR",payload:"Some Error Occoured"})})}},addURL:function(e){return function(t){t({type:"CURATOR_LOAD"}),N.a.post("/api/url/addurl",e).then(function(e){e.data.success?t({type:"CURATOR_LINKS",payload:e.data.data}):(t({type:"CURATOR_ERROR",payload:"Error Occoured Check Link"}),alert("Error Occoured Check Link"))}).catch(function(e){return t({type:"CURATOR_ERROR",payload:"Some Error Occoured"})})}},logOutCurator:function(){return function(e){e({type:"CURATOR_LOAD"}),w(),localStorage.removeItem("jwtToken"),e({type:"CURATOR_LOGOUT"})}}})(G);var M=function(){return n.a.createElement(o.a,{store:p},n.a.createElement("div",{className:"App"},n.a.createElement(v.a,null,n.a.createElement(g.b,{exact:!0,path:"/",component:D}),n.a.createElement(g.b,{path:"/dashboard",component:P}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t,a){e.exports=a.p+"static/media/logo.9221e222.png"},87:function(e,t,a){e.exports=a(211)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.65ae1cdc.chunk.js.map