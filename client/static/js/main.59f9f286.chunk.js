(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(37),i=a.n(s),o=(a(92),a(93),a(94),a(21)),c=a(13),l=a(81),u=a(6),d={isAuthenticated:!1,curator:null,curatorLoading:!1,curatorLinks:[],curatorError:null},h=Object(c.c)({curator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURATOR_LOAD":return Object(u.a)({},e,{curatorLoading:!0});case"CURATOR_LOGIN":return Object(u.a)({},e,{curatorLoading:!1,curator:t.payload,isAuthenticated:!0,curatorError:null});case"CURATOR_ERROR":return Object(u.a)({},e,{curatorLoading:!1,curatorError:t.payload});case"CURATOR_LINKS":case"CURATOR_ADD_URL":return Object(u.a)({},e,{curatorLoading:!1,curatorLinks:t.payload,curatorError:null});case"CURATOR_LOGOUT":return Object(u.a)({},e,{isAuthenticated:!1,curator:null,curatorLoading:!1,curatorLinks:[],curatorError:null});default:return e}}}),m=[l.a],p=Object(c.e)(h,{},Object(c.d)(c.a.apply(void 0,m),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),v=a(50),g=a(8),E=a(39),k=a(18),f=a(19),L=a(22),b=a(20),O=a(23),y=a(14),w=a.n(y),N=function(e){e?w.a.defaults.headers.common.Authorization=e:delete w.a.defaults.headers.common.Authorization},R=a(82),C=a.n(R),A=function(e){return function(t){t({type:"CURATOR_LOAD"}),w.a.get("/api/curatorauth/current",{headers:{authorization:e}}).then(function(a){localStorage.setItem("jwtToken",e),N(e),t({type:"CURATOR_LOGIN",payload:a.data})}).catch(function(e){return console.log(e)})}},S=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(L.a)(this,Object(b.a)(t).call(this,e))).formDataChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.login=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.loginCurator(t)},a.state={isAuthenticated:!1,email:"",password:"",error:null},a}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({isAuthenticated:this.props.curator.isAuthenticated}),localStorage.jwtToken&&this.props.getCurrentCurator(localStorage.jwtToken)}},{key:"componentWillReceiveProps",value:function(e){e.curator&&(this.setState({isAuthenticated:e.curator.isAuthenticated}),e.curator.curatorError&&this.setState({error:e.curator.curatorError}))}},{key:"render",value:function(){return this.state.isAuthenticated?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-body"},r.a.createElement("div",{className:"login-body-circle login-body-circle-1"}),r.a.createElement("div",{className:"login-body-circle login-body-circle-2"})),r.a.createElement("div",{className:"login-content"},r.a.createElement("div",{className:"login-content-left"},r.a.createElement("div",{className:"login-content-left-logo"},r.a.createElement("img",{src:a(64),alt:""})),r.a.createElement("form",{className:"login-content-left-form",onSubmit:this.login},r.a.createElement("label",{htmlFor:"login-form-email"},"E-mail"),r.a.createElement("input",{type:"email",name:"email",id:"login-form-email",value:this.state.email,onChange:this.formDataChange}),r.a.createElement("label",{htmlFor:"login-form-password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"login-form-password",value:this.state.password,onChange:this.formDataChange}),r.a.createElement("button",{type:"submit"},"LOGIN"))),r.a.createElement("div",{className:"login-content-right"},r.a.createElement("span",null,"MANAGE AND SHORTEN YOUR LINKS")),this.state.error?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.error):null))}}]),t}(n.Component),D=Object(o.b)(function(e){return{curator:e.curator}},{loginCurator:function(e){return function(t){t({type:"CURATOR_LOAD"}),w.a.post("/api/curatorauth/login",e).then(function(e){if(e.data.success){var a=e.data.token;localStorage.setItem("jwtToken",a),N(a);var n=C()(a);t({type:"CURATOR_LOGIN",payload:n.users})}else t({type:"CURATOR_ERROR",payload:"AUTH ERROR"})}).catch(function(e){t({type:"CURATOR_ERROR",payload:e.response.data.err})})}},getCurrentCurator:A})(S),T=a(16),U=a(17),j=a(84),_=a(86),I=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(L.a)(this,Object(b.a)(t).call(this,e))).toggleDatePicker=function(){a.setState({datePicker:!a.state.datePicker})},a.onDateChange=function(e,t){"month"===e&&a.setState({selectedMonth:t}),"year"===e&&a.setState({selectedYear:t}),a.updateGraph()},a.viewCountryStats=function(){var e=[];for(var t in a.state.countries)a.state.countries.hasOwnProperty(t)&&e.push(r.a.createElement("li",{className:"list-group-item",key:t},t," ",r.a.createElement("span",{style:{float:"right"}},a.state.countries[t])));return e},a.viewDeviceStats=function(){var e=[];for(var t in a.state.devices)a.state.devices.hasOwnProperty(t)&&e.push(r.a.createElement("li",{className:"list-group-item",key:t},t," ",r.a.createElement("span",{style:{float:"right"}},a.state.devices[t])));return e},a.state={graphData:{labels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],datasets:[{label:"Views",data:[],backgroundColor:"#EDA543"}]},linkData:null,selectedMonth:(new Date).getMonth()+1,selectedYear:(new Date).getFullYear(),datePicker:!1,countries:[],devices:[]},a}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({linkData:this.props.data}),this.updateGraph()}},{key:"updateGraph",value:function(){for(var e=this,t=[],a=1;a<=31;a++)t[a]=0;this.props.data.accessed.map(function(a){if(e.state.selectedYear==a.year&&e.state.selectedMonth==a.month)switch(a.day){case a.day:t[a.day]++}});var n=[],r=[];this.props.data.accessed.map(function(e){n[e.location]?n[e.location]++:n[e.location]=1,r[e.device]?r[e.device]++:r[e.device]=1}),this.setState({countries:n,devices:r}),this.setState({graphData:Object(u.a)({},this.state.graphData,{datasets:[{label:"Views",data:t,backgroundColor:"#EDA543"}]})})}},{key:"render",value:function(){var e=this;return this.state.linkData?(this.state.countries.map(function(e){return console.log("foo")}),r.a.createElement("div",{className:"viewLink-wrapper"},r.a.createElement("div",{className:"viewLink-body"},r.a.createElement(T.a,{className:"viewLink-body-close",icon:U.e,onClick:this.props.closeLinkStats}),r.a.createElement("div",{className:"viewLink-body-link"},r.a.createElement("div",{className:"viewLink-body-link-long"},this.state.linkData.longUrl),r.a.createElement("div",{className:"viewLink-body-link-short"},this.state.linkData.shortUrl)),r.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleDatePicker},this.state.selectedYear+"/"+this.state.selectedMonth),this.state.datePicker?r.a.createElement("div",{className:"viewLink-body-monthPicker"},r.a.createElement(_.a,{selectedMonth:this.state.selectedMonth,selectedYear:this.state.selectedYear,minYear:2e3,maxYear:2030,onChangeYear:function(t){return e.onDateChange("year",t)},onChangeMonth:function(t){return e.onDateChange("month",t)}})):null,r.a.createElement("div",{className:"viewLink-body-graph"},r.a.createElement(j.a,{label:"views",data:this.state.graphData,options:{maintainAspectRatio:!1}})),r.a.createElement("div",{className:"viewLink-body-totalViews"},"Total -  ",this.state.linkData.accessed.length),r.a.createElement("div",{className:"viewLink-body-metrics"},r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item active"}," Countries"),this.viewCountryStats())),r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item active"},"Top DEVICES"),this.viewDeviceStats())))))):r.a.createElement("h1",null,"LOADING ...")}}]),t}(n.Component),G=(a(211),function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(L.a)(this,Object(b.a)(t).call(this,e))).viewLinkStats=function(e){a.setState({viewLink:!a.state.viewLink,selectedLink:e})},a.topLinks=function(){var e=a.state.myLinks;return(e=e.map(function(e){var t=e.accessed.length;return Object(u.a)({},e,{views:t})})).sort(function(e,t,a){var n=a?function(t){return a(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,a){return e=n(e),a=n(a),t*((e>a)-(a>e))}}("views",!0,parseInt)),e},a.addLink=function(){a.props.addURL({longUrl:a.state.newLink})},a.logout=function(){a.props.logOutCurator()},a.searchLinksChange=function(e){a.setState({search:e.target.value})},a.searchLinks=function(){var e=a.state.myLinks;e=e.filter(function(e){return e.longUrl.includes(a.state.search)}),a.setState({searchLinks:e})},a.state={isAuthenticated:!1,viewLink:!1,curator:null,myLinks:[],selectedLink:null,newLink:"",search:"",searchLinks:[]},a}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({isAuthenticated:this.props.curator.isAuthenticated}),localStorage.jwtToken&&this.props.getCurrentCurator(localStorage.jwtToken),this.props.curator.isAuthenticated&&this.props.getCuratorLinks()}},{key:"componentWillReceiveProps",value:function(e){e.curator&&(this.setState({isAuthenticated:e.curator.isAuthenticated}),e.curator.curator&&this.setState({curator:e.curator.curator}),e.curator.curatorLinks&&this.setState({myLinks:e.curator.curatorLinks}))}},{key:"render",value:function(){var e=this,t=0;return this.state.myLinks.map(function(e){t+=e.accessed.length}),r.a.createElement(r.a.Fragment,null,this.props.curator.isAuthenticated?null:r.a.createElement(g.a,{to:"/"}),this.props.curator.curatorLoading?r.a.createElement("h1",null,"LOADING ...."):null,this.state.viewLink&&this.state.selectedLink?r.a.createElement(I,{closeLinkStats:this.viewLinkStats,data:this.state.selectedLink}):null,this.state.curator?r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"dashboard-left"},r.a.createElement("div",{className:"dashboard-left-topBar"},r.a.createElement("div",{className:"dashboard-left-topBar-logo"},r.a.createElement("img",{src:a(64),alt:"logo"})),r.a.createElement("div",{className:"dashboard-left-topBar-search"},r.a.createElement("input",{type:"text",name:"search",id:"link-searchBar",placeholder:"Search Links",onChange:this.searchLinksChange,value:this.state.search}),r.a.createElement("button",{onClick:this.searchLinks}," ",r.a.createElement(T.a,{icon:U.d})))),r.a.createElement("div",{className:"dashboard-left-add"},r.a.createElement("input",{type:"text",name:"add",id:"add",placeholder:"Paste your Link here to shorten",value:this.state.newLink,onChange:function(t){return e.setState({newLink:t.target.value})}}),r.a.createElement("button",{onClick:this.addLink},"GO")),r.a.createElement("div",{className:"dashboard-left-list"},r.a.createElement("div",{className:"dashboard-left-list-head"},"ALL LINKS"),r.a.createElement("ul",null,!this.state.searchLinks.length>0&&this.state.myLinks.map(function(t){return r.a.createElement("li",{onClick:function(){return e.viewLinkStats(t)}},t.longUrl,r.a.createElement("span",null,t.shortUrl))}),this.state.searchLinks.length>0&&this.state.searchLinks.map(function(t){return r.a.createElement("li",{onClick:function(){return e.viewLinkStats(t)}},t.longUrl,r.a.createElement("span",null,t.shortUrl))})))),r.a.createElement("div",{className:"dashboard-divider"},r.a.createElement("div",{className:"dashboard-divider-line"})),r.a.createElement("div",{className:"dashboard-right"},r.a.createElement("div",{className:"dashboard-right-profile"},r.a.createElement("div",{className:"dashboard-right-profile-image"},r.a.createElement("img",{src:"http://flawless-psyche-243712.appspot.com"+this.state.curator.avatar,alt:"Avatar"})),r.a.createElement("div",{className:"dashboard-right-profile-name"},this.state.curator.name),r.a.createElement("div",{className:"dashboard-right-profile-type"},this.state.curator.typeOfUser)),r.a.createElement("ul",{className:"dashboard-right-stats"},r.a.createElement("li",null,r.a.createElement("div",{className:"dashboard-right-stats-icon"},r.a.createElement(T.a,{icon:U.a})),r.a.createElement("div",{className:"dashboard-right-stats-count"},t),r.a.createElement("div",{className:"dashboard-right-stats-name"},"Total Views")),r.a.createElement("li",null,r.a.createElement("div",{className:"dashboard-right-stats-icon"},r.a.createElement(T.a,{icon:U.b})),r.a.createElement("div",{className:"dashboard-right-stats-count"},"77"),r.a.createElement("div",{className:"dashboard-right-stats-name"},"Top Location"))," ",r.a.createElement("li",null,r.a.createElement("div",{className:"dashboard-right-stats-icon"},r.a.createElement(T.a,{icon:U.c})),r.a.createElement("div",{className:"dashboard-right-stats-count"},this.state.myLinks.length),r.a.createElement("div",{className:"dashboard-right-stats-name"},"Total Links"))),r.a.createElement("div",{className:"dashboard-right-topLinks-title"},"Top Links"),r.a.createElement("ul",{className:"dashboard-right-topLinks"},this.topLinks().map(function(t,a){if(a<5)return r.a.createElement("li",{className:"dashboard-right-topLinks-item",onClick:function(){return e.viewLinkStats(t)}},t.shortUrl.substring(0,27)," ",r.a.createElement("span",null,t.views)," ")})),r.a.createElement("div",{className:"dashboard-right-accountLinks"},r.a.createElement("div",{className:"dashboard-right-accountLinks-item",onClick:this.logout},"Logout")))):null)}}]),t}(n.Component)),P=Object(o.b)(function(e){return{curator:e.curator}},{getCurrentCurator:A,getCuratorLinks:function(){return function(e){e({type:"CURATOR_LOAD"}),w.a.get("/api/url/mylinks").then(function(t){e({type:"CURATOR_LINKS",payload:t.data})}).catch(function(t){return e({type:"CURATOR_ERROR",payload:"Some Error Occoured"})})}},addURL:function(e){return function(t){t({type:"CURATOR_LOAD"}),w.a.post("/api/url/addurl",e).then(function(e){e.data.success?t({type:"CURATOR_LINKS",payload:e.data.data}):(t({type:"CURATOR_ERROR",payload:"Error Occoured Check Link"}),alert("Error Occoured Check Link"))}).catch(function(e){return t({type:"CURATOR_ERROR",payload:"Some Error Occoured"})})}},logOutCurator:function(){return function(e){e({type:"CURATOR_LOAD"}),N(),localStorage.removeItem("jwtToken"),e({type:"CURATOR_LOGOUT"})}}})(G);var M=function(){return r.a.createElement(o.a,{store:p},r.a.createElement("div",{className:"App"},r.a.createElement(v.a,null,r.a.createElement(g.b,{exact:!0,path:"/",component:D}),r.a.createElement(g.b,{path:"/dashboard",component:P}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t,a){e.exports=a.p+"static/media/logo.9221e222.png"},87:function(e,t,a){e.exports=a(214)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.59f9f286.chunk.js.map